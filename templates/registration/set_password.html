{% extends "base.html" %}

{% load crispy_forms_tags %}

{% block content %}

{% if validlink %}

<h4 class="mt-4">Welcome. Please set your password so you can login.</h4>

<form method="post">
	{% csrf_token %}
	<input type="hidden" autocomplete="username" value="{{ form.user.get_username }}">
	<div>
			{{ form.new_password1.errors }}
			<label for="id_new_password1">New password:</label>
			{{ form.new_password1 }}
	</div>
	<div>
			{{ form.new_password2.errors }}
			<label for="id_new_password2">Confirm password:</label>
			{{ form.new_password2 }}
	</div>
	<input id="new_password_submit" type="submit" value="Submit">
</form>

{% else %}

<p>The password reset link was invalid, possibly because it has already been used.  Please request a new password reset.</p>

{% endif %}

	<script>
		const pass1 = document.getElementById('id_new_password1');
		const pass2 = document.getElementById('id_new_password2');
		const setPasswordSubmit = document.getElementById('new_password_submit');
		pass1.className = 'form-control';
		pass2.className = 'form-control';
		setPasswordSubmit.className = 'btn btn-primary mt-2';
	</script>

{% endblock %}